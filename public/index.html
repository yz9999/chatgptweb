<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>SheerID è‡ªåŠ¨åŒ–å·¥å…·</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; display: flex; justify-content: center; padding: 40px; background: #f5f5f7; }
        .card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); width: 100%; max-width: 450px; }
        h2 { margin-top: 0; color: #1d1d1f; }
        input { width: 100%; padding: 12px; margin: 15px 0; border: 1px solid #d2d2d7; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #0071e3; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; }
        button:disabled { background: #999; }
        #status { margin-top: 20px; white-space: pre-wrap; font-size: 14px; line-height: 1.5; }
        .success-box { background: #f2fcf5; border: 1px solid #34c759; padding: 10px; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>éªŒè¯é“¾æ¥æå–</h2>
        <input type="text" id="urlInput" placeholder="åœ¨æ­¤ç²˜è´´ SheerID åˆå§‹é“¾æ¥">
        <button id="runBtn" onclick="runTask()">å¼€å§‹å…¨è‡ªåŠ¨æå–</button>
        <div id="status"></div>
    </div>

    <script>
        async function runTask() {
            const btn = document.getElementById('runBtn');
            const status = document.getElementById('status');
            const url = document.getElementById('urlInput').value;

            if(!url) return alert("è¯·è¾“å…¥é“¾æ¥");

            btn.disabled = true;
            status.innerHTML = "â³ æ­£åœ¨å¯åŠ¨ Python è„šæœ¬...\n1. æ­£åœ¨ç”Ÿæˆå‹‹ç« æˆå‘˜èµ„æ–™\n2. æ­£åœ¨æ³¨å†Œä¸´æ—¶é‚®ç®±\n3. æ­£åœ¨æäº¤ SheerID è¡¨å•...";

            try {
                const response = await fetch('/api/verify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ programUrl: url })
                });
                const data = await response.json();

                if (data.status === 'SUCCESS') {
                    status.innerHTML = `<div class="success-box">
                        <b>âœ… æå–æˆåŠŸï¼</b><br>
                        å§“å: ${data.name}<br>
                        é‚®ç®±: ${data.email}<br><br>
                        <a href="${data.link}" target="_blank" style="color:#0071e3">ğŸ‘‰ ç‚¹å‡»æ­¤å¤„è·³è½¬åˆ°æ¿€æ´»é¡µ</a>
                    </div>`;
                } else {
                    status.innerHTML = "âŒ é”™è¯¯: " + (data.error || "æœªçŸ¥å¼‚å¸¸");
                }
            } catch (e) {
                status.innerHTML = "âŒ è¯·æ±‚å¤±è´¥ï¼Œå¯èƒ½è§¦å‘äº† Vercel çš„è¶…æ—¶é™åˆ¶ (10s)";
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
